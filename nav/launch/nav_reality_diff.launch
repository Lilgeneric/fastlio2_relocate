<launch>
    <!-- 1. 声明算法选择参数（0=fastlio_localization  1=fastlio2） -->
    <arg name="algorithm" default="0" />
    <param name="/use_sim_time" value="true" />

    <!-- 机器人仿真模型及gazebo -->
    <include file="$(find car_model)/launch/car.launch">
        <arg name="car_model_rviz" value="false" />
    </include>

    <!-- 路径规划算法 -->
    <include file = "$(find route_planning)/launch/move_base.launch"/>

    <!-- 全局地图发布 -->
    <include file = "$(find nav)/launch/map_server.launch"/>

    <!-- 选项1：fast_lio2定位算法 -->
    <include if="$(arg algorithm)" file = "$(find fast_lio)/launch/mapping_velodyne.launch">
        <arg name="pcd_save_en" value="false"/>
    </include>

    <!-- 选项0：fast_lio_localization定位算法 -->
    <include unless="$(arg algorithm)" file="$(find fast_lio_localization)/launch/localization_velodyne.launch">
        <arg name="map" value="$(find fast_lio_localization)/PCD/zsq_downsampled.pcd"/> 
    </include>

    <!-- tf发布，保证tf树只有唯一根节点 -->
    <node name="map2odom" pkg="tf2_ros" type="static_transform_publisher" args="0 0 0 0 0 0 /map /odom"/>

    <!-- 加载RVIZ及配置文件 -->
    <node pkg="rviz" type="rviz" name="nav_rviz" args="-d $(find nav)/rviz_cfg/nav.rviz" />
</launch>
